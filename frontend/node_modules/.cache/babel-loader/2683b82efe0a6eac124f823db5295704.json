{"ast":null,"code":"import { options as n } from \"preact\";\nvar t,\n    u,\n    r,\n    i = 0,\n    o = [],\n    c = n.__r,\n    f = n.diffed,\n    e = n.__c,\n    a = n.unmount;\n\nfunction v(t, r) {\n  n.__h && n.__h(u, t, i || r), i = 0;\n  var o = u.__H || (u.__H = {\n    __: [],\n    __h: []\n  });\n  return t >= o.__.length && o.__.push({}), o.__[t];\n}\n\nfunction m(n) {\n  return i = 1, p(E, n);\n}\n\nfunction p(n, r, i) {\n  var o = v(t++, 2);\n  return o.__c || (o.__c = u, o.__ = [i ? i(r) : E(void 0, r), function (t) {\n    var u = n(o.__[0], t);\n    o.__[0] !== u && (o.__[0] = u, o.__c.setState({}));\n  }]), o.__;\n}\n\nfunction l(r, i) {\n  var o = v(t++, 3);\n  !n.__s && x(o.__H, i) && (o.__ = r, o.__H = i, u.__H.__h.push(o));\n}\n\nfunction y(r, i) {\n  var o = v(t++, 4);\n  !n.__s && x(o.__H, i) && (o.__ = r, o.__H = i, u.__h.push(o));\n}\n\nfunction d(n) {\n  return i = 5, h(function () {\n    return {\n      current: n\n    };\n  }, []);\n}\n\nfunction s(n, t, u) {\n  i = 6, y(function () {\n    \"function\" == typeof n ? n(t()) : n && (n.current = t());\n  }, null == u ? u : u.concat(n));\n}\n\nfunction h(n, u) {\n  var r = v(t++, 7);\n  return x(r.__H, u) ? (r.__H = u, r.__h = n, r.__ = n()) : r.__;\n}\n\nfunction T(n, t) {\n  return i = 8, h(function () {\n    return n;\n  }, t);\n}\n\nfunction w(n) {\n  var r = u.context[n.__c],\n      i = v(t++, 9);\n  return i.__c = n, r ? (null == i.__ && (i.__ = !0, r.sub(u)), r.props.value) : n.__;\n}\n\nfunction A(t, u) {\n  n.useDebugValue && n.useDebugValue(u ? u(t) : t);\n}\n\nfunction F(n) {\n  var r = v(t++, 10),\n      i = m();\n  return r.__ = n, u.componentDidCatch || (u.componentDidCatch = function (n) {\n    r.__ && r.__(n), i[1](n);\n  }), [i[0], function () {\n    i[1](void 0);\n  }];\n}\n\nfunction _() {\n  o.some(function (t) {\n    if (t.__P) try {\n      t.__H.__h.forEach(g), t.__H.__h.forEach(q), t.__H.__h = [];\n    } catch (u) {\n      return t.__H.__h = [], n.__e(u, t.__v), !0;\n    }\n  }), o = [];\n}\n\nfunction g(n) {\n  n.t && n.t();\n}\n\nfunction q(n) {\n  var t = n.__();\n\n  \"function\" == typeof t && (n.t = t);\n}\n\nfunction x(n, t) {\n  return !n || t.some(function (t, u) {\n    return t !== n[u];\n  });\n}\n\nfunction E(n, t) {\n  return \"function\" == typeof t ? t(n) : t;\n}\n\nn.__r = function (n) {\n  c && c(n), t = 0, (u = n.__c).__H && (u.__H.__h.forEach(g), u.__H.__h.forEach(q), u.__H.__h = []);\n}, n.diffed = function (t) {\n  f && f(t);\n  var u = t.__c;\n\n  if (u) {\n    var i = u.__H;\n    i && i.__h.length && (1 !== o.push(u) && r === n.requestAnimationFrame || ((r = n.requestAnimationFrame) || function (n) {\n      var t,\n          u = function () {\n        clearTimeout(r), cancelAnimationFrame(t), setTimeout(n);\n      },\n          r = setTimeout(u, 100);\n\n      \"undefined\" != typeof window && (t = requestAnimationFrame(u));\n    })(_));\n  }\n}, n.__c = function (t, u) {\n  u.some(function (t) {\n    try {\n      t.__h.forEach(g), t.__h = t.__h.filter(function (n) {\n        return !n.__ || q(n);\n      });\n    } catch (r) {\n      u.some(function (n) {\n        n.__h && (n.__h = []);\n      }), u = [], n.__e(r, t.__v);\n    }\n  }), e && e(t, u);\n}, n.unmount = function (t) {\n  a && a(t);\n  var u = t.__c;\n\n  if (u) {\n    var r = u.__H;\n    if (r) try {\n      r.__.forEach(function (n) {\n        return n.t && n.t();\n      });\n    } catch (t) {\n      n.__e(t, u.__v);\n    }\n  }\n};\nexport { m as useState, p as useReducer, l as useEffect, y as useLayoutEffect, d as useRef, s as useImperativeHandle, h as useMemo, T as useCallback, w as useContext, A as useDebugValue, F as useErrorBoundary };","map":{"version":3,"mappings":"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","names":["currentIndex","currentComponent","prevRaf","currentHook","afterPaintEffects","oldBeforeRender","options","_render","oldAfterDiff","diffed","oldCommit","_commit","oldBeforeUnmount","unmount","getHookState","index","type","_hook","hooks","__hooks","_list","_pendingEffects","length","push","useState","initialState","useReducer","invokeOrReturn","reducer","init","hookState","_component","_value","undefined","action","nextValue","setState","useEffect","callback","args","state","_skipEffects","argsChanged","_args","useLayoutEffect","_renderCallbacks","useRef","initialValue","useMemo","current","useImperativeHandle","ref","createHandle","concat","factory","_factory","useCallback","useContext","context","provider","_id","_context","sub","props","value","_defaultValue","useDebugValue","formatter","useErrorBoundary","cb","errState","componentDidCatch","err","flushAfterPaintEffects","some","component","_parentDom","forEach","invokeCleanup","invokeEffect","e","_catchError","_vnode","hook","_cleanup","result","oldArgs","newArgs","arg","f","vnode","c","requestAnimationFrame","raf","done","clearTimeout","timeout","cancelAnimationFrame","setTimeout","window","commitQueue","filter"],"sources":["C:\\Users\\USER\\Documents\\demo-react\\node_modules\\@walletconnect\\qrcode-modal\\node_modules\\preact\\hooks\\src\\index.js"],"sourcesContent":["import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tif (currentComponent.__hooks) {\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\tcurrentComponent.__hooks._pendingEffects = [];\n\t}\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\tif (hooks._pendingEffects.length) {\n\t\t\tafterPaint(afterPaintEffects.push(c));\n\t\t}\n\t}\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\ttry {\n\t\t\thooks._list.forEach(hook => hook._cleanup && hook._cleanup());\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {import('./internal').HookState}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} initialState\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\tif (!hookState._component) {\n\t\thookState._component = currentComponent;\n\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst nextValue = reducer(hookState._value[0], action);\n\t\t\t\tif (hookState._value[0] !== nextValue) {\n\t\t\t\t\thookState._value[0] = nextValue;\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\treturn hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') ref(createHandle());\n\t\t\telse if (ref) ref.current = createHandle();\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t\treturn (state._value = factory());\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\nexport function useErrorBoundary(cb) {\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = err => {\n\t\t\tif (state._value) state._value(err);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tafterPaintEffects.some(component => {\n\t\tif (component._parentDom) {\n\t\t\ttry {\n\t\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\t} catch (e) {\n\t\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\t\toptions._catchError(e, component._vnode);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\tafterPaintEffects = [];\n}\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tcancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (typeof window != 'undefined') {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\tif (hook._cleanup) hook._cleanup();\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\tconst result = hook._value();\n\tif (typeof result == 'function') hook._cleanup = result;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn !oldArgs || newArgs.some((arg, index) => arg !== oldArgs[index]);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n"]},"metadata":{},"sourceType":"module"}