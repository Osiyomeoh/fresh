{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withTimeout = void 0;\n\nvar tslib_1 = require(\"tslib\"); // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n\nfunction withTimeout(sync, timeout, timeoutError) {\n  var _this = this;\n\n  if (timeoutError === void 0) {\n    timeoutError = new Error('timeout');\n  }\n\n  return {\n    acquire: function () {\n      return new Promise(function (resolve, reject) {\n        return tslib_1.__awaiter(_this, void 0, void 0, function () {\n          var isTimeout, ticket, release;\n          return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                isTimeout = false;\n                setTimeout(function () {\n                  isTimeout = true;\n                  reject(timeoutError);\n                }, timeout);\n                return [4\n                /*yield*/\n                , sync.acquire()];\n\n              case 1:\n                ticket = _a.sent();\n\n                if (isTimeout) {\n                  release = Array.isArray(ticket) ? ticket[1] : ticket;\n                  release();\n                } else {\n                  resolve(ticket);\n                }\n\n                return [2\n                /*return*/\n                ];\n            }\n          });\n        });\n      });\n    },\n    runExclusive: function (callback) {\n      return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var release, ticket;\n        return tslib_1.__generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              release = function () {\n                return undefined;\n              };\n\n              _a.label = 1;\n\n            case 1:\n              _a.trys.push([1,, 7, 8]);\n\n              return [4\n              /*yield*/\n              , this.acquire()];\n\n            case 2:\n              ticket = _a.sent();\n              if (!Array.isArray(ticket)) return [3\n              /*break*/\n              , 4];\n              release = ticket[1];\n              return [4\n              /*yield*/\n              , callback(ticket[0])];\n\n            case 3:\n              return [2\n              /*return*/\n              , _a.sent()];\n\n            case 4:\n              release = ticket;\n              return [4\n              /*yield*/\n              , callback()];\n\n            case 5:\n              return [2\n              /*return*/\n              , _a.sent()];\n\n            case 6:\n              return [3\n              /*break*/\n              , 8];\n\n            case 7:\n              release();\n              return [7\n              /*endfinally*/\n              ];\n\n            case 8:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    },\n    release: function () {\n      sync.release();\n    },\n    isLocked: function () {\n      return sync.isLocked();\n    }\n  };\n}\n\nexports.withTimeout = withTimeout;","map":{"version":3,"names":["Object","defineProperty","exports","value","withTimeout","tslib_1","require","sync","timeout","timeoutError","_this","Error","acquire","Promise","resolve","reject","__awaiter","isTimeout","ticket","release","__generator","_a","label","setTimeout","sent","Array","isArray","runExclusive","callback","undefined","trys","push","isLocked"],"sources":["C:/Users/USER/Documents/demo-react/node_modules/async-mutex/lib/withTimeout.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.withTimeout = void 0;\nvar tslib_1 = require(\"tslib\");\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction withTimeout(sync, timeout, timeoutError) {\n    var _this = this;\n    if (timeoutError === void 0) { timeoutError = new Error('timeout'); }\n    return {\n        acquire: function () {\n            return new Promise(function (resolve, reject) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var isTimeout, ticket, release;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            isTimeout = false;\n                            setTimeout(function () {\n                                isTimeout = true;\n                                reject(timeoutError);\n                            }, timeout);\n                            return [4 /*yield*/, sync.acquire()];\n                        case 1:\n                            ticket = _a.sent();\n                            if (isTimeout) {\n                                release = Array.isArray(ticket) ? ticket[1] : ticket;\n                                release();\n                            }\n                            else {\n                                resolve(ticket);\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        },\n        runExclusive: function (callback) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var release, ticket;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            release = function () { return undefined; };\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, , 7, 8]);\n                            return [4 /*yield*/, this.acquire()];\n                        case 2:\n                            ticket = _a.sent();\n                            if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n                            release = ticket[1];\n                            return [4 /*yield*/, callback(ticket[0])];\n                        case 3: return [2 /*return*/, _a.sent()];\n                        case 4:\n                            release = ticket;\n                            return [4 /*yield*/, callback()];\n                        case 5: return [2 /*return*/, _a.sent()];\n                        case 6: return [3 /*break*/, 8];\n                        case 7:\n                            release();\n                            return [7 /*endfinally*/];\n                        case 8: return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        release: function () {\n            sync.release();\n        },\n        isLocked: function () { return sync.isLocked(); },\n    };\n}\nexports.withTimeout = withTimeout;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}