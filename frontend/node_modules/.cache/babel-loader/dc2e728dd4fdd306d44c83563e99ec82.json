{"ast":null,"code":"\"use strict\"; // Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Package poly1305 implements Poly1305 one-time message authentication algorithm.\n */\n\nvar constant_time_1 = require(\"@stablelib/constant-time\");\n\nvar wipe_1 = require(\"@stablelib/wipe\");\n\nexports.DIGEST_LENGTH = 16; // Port of Andrew Moon's Poly1305-donna-16. Public domain.\n// https://github.com/floodyberry/poly1305-donna\n\n/**\n * Poly1305 computes 16-byte authenticator of message using\n * a one-time 32-byte key.\n *\n * Important: key should be used for only one message,\n * it should never repeat.\n */\n\nvar Poly1305 =\n/** @class */\nfunction () {\n  function Poly1305(key) {\n    this.digestLength = exports.DIGEST_LENGTH;\n    this._buffer = new Uint8Array(16);\n    this._r = new Uint16Array(10);\n    this._h = new Uint16Array(10);\n    this._pad = new Uint16Array(8);\n    this._leftover = 0;\n    this._fin = 0;\n    this._finished = false;\n    var t0 = key[0] | key[1] << 8;\n    this._r[0] = t0 & 0x1fff;\n    var t1 = key[2] | key[3] << 8;\n    this._r[1] = (t0 >>> 13 | t1 << 3) & 0x1fff;\n    var t2 = key[4] | key[5] << 8;\n    this._r[2] = (t1 >>> 10 | t2 << 6) & 0x1f03;\n    var t3 = key[6] | key[7] << 8;\n    this._r[3] = (t2 >>> 7 | t3 << 9) & 0x1fff;\n    var t4 = key[8] | key[9] << 8;\n    this._r[4] = (t3 >>> 4 | t4 << 12) & 0x00ff;\n    this._r[5] = t4 >>> 1 & 0x1ffe;\n    var t5 = key[10] | key[11] << 8;\n    this._r[6] = (t4 >>> 14 | t5 << 2) & 0x1fff;\n    var t6 = key[12] | key[13] << 8;\n    this._r[7] = (t5 >>> 11 | t6 << 5) & 0x1f81;\n    var t7 = key[14] | key[15] << 8;\n    this._r[8] = (t6 >>> 8 | t7 << 8) & 0x1fff;\n    this._r[9] = t7 >>> 5 & 0x007f;\n    this._pad[0] = key[16] | key[17] << 8;\n    this._pad[1] = key[18] | key[19] << 8;\n    this._pad[2] = key[20] | key[21] << 8;\n    this._pad[3] = key[22] | key[23] << 8;\n    this._pad[4] = key[24] | key[25] << 8;\n    this._pad[5] = key[26] | key[27] << 8;\n    this._pad[6] = key[28] | key[29] << 8;\n    this._pad[7] = key[30] | key[31] << 8;\n  }\n\n  Poly1305.prototype._blocks = function (m, mpos, bytes) {\n    var hibit = this._fin ? 0 : 1 << 11;\n    var h0 = this._h[0],\n        h1 = this._h[1],\n        h2 = this._h[2],\n        h3 = this._h[3],\n        h4 = this._h[4],\n        h5 = this._h[5],\n        h6 = this._h[6],\n        h7 = this._h[7],\n        h8 = this._h[8],\n        h9 = this._h[9];\n    var r0 = this._r[0],\n        r1 = this._r[1],\n        r2 = this._r[2],\n        r3 = this._r[3],\n        r4 = this._r[4],\n        r5 = this._r[5],\n        r6 = this._r[6],\n        r7 = this._r[7],\n        r8 = this._r[8],\n        r9 = this._r[9];\n\n    while (bytes >= 16) {\n      var t0 = m[mpos + 0] | m[mpos + 1] << 8;\n      h0 += t0 & 0x1fff;\n      var t1 = m[mpos + 2] | m[mpos + 3] << 8;\n      h1 += (t0 >>> 13 | t1 << 3) & 0x1fff;\n      var t2 = m[mpos + 4] | m[mpos + 5] << 8;\n      h2 += (t1 >>> 10 | t2 << 6) & 0x1fff;\n      var t3 = m[mpos + 6] | m[mpos + 7] << 8;\n      h3 += (t2 >>> 7 | t3 << 9) & 0x1fff;\n      var t4 = m[mpos + 8] | m[mpos + 9] << 8;\n      h4 += (t3 >>> 4 | t4 << 12) & 0x1fff;\n      h5 += t4 >>> 1 & 0x1fff;\n      var t5 = m[mpos + 10] | m[mpos + 11] << 8;\n      h6 += (t4 >>> 14 | t5 << 2) & 0x1fff;\n      var t6 = m[mpos + 12] | m[mpos + 13] << 8;\n      h7 += (t5 >>> 11 | t6 << 5) & 0x1fff;\n      var t7 = m[mpos + 14] | m[mpos + 15] << 8;\n      h8 += (t6 >>> 8 | t7 << 8) & 0x1fff;\n      h9 += t7 >>> 5 | hibit;\n      var c = 0;\n      var d0 = c;\n      d0 += h0 * r0;\n      d0 += h1 * (5 * r9);\n      d0 += h2 * (5 * r8);\n      d0 += h3 * (5 * r7);\n      d0 += h4 * (5 * r6);\n      c = d0 >>> 13;\n      d0 &= 0x1fff;\n      d0 += h5 * (5 * r5);\n      d0 += h6 * (5 * r4);\n      d0 += h7 * (5 * r3);\n      d0 += h8 * (5 * r2);\n      d0 += h9 * (5 * r1);\n      c += d0 >>> 13;\n      d0 &= 0x1fff;\n      var d1 = c;\n      d1 += h0 * r1;\n      d1 += h1 * r0;\n      d1 += h2 * (5 * r9);\n      d1 += h3 * (5 * r8);\n      d1 += h4 * (5 * r7);\n      c = d1 >>> 13;\n      d1 &= 0x1fff;\n      d1 += h5 * (5 * r6);\n      d1 += h6 * (5 * r5);\n      d1 += h7 * (5 * r4);\n      d1 += h8 * (5 * r3);\n      d1 += h9 * (5 * r2);\n      c += d1 >>> 13;\n      d1 &= 0x1fff;\n      var d2 = c;\n      d2 += h0 * r2;\n      d2 += h1 * r1;\n      d2 += h2 * r0;\n      d2 += h3 * (5 * r9);\n      d2 += h4 * (5 * r8);\n      c = d2 >>> 13;\n      d2 &= 0x1fff;\n      d2 += h5 * (5 * r7);\n      d2 += h6 * (5 * r6);\n      d2 += h7 * (5 * r5);\n      d2 += h8 * (5 * r4);\n      d2 += h9 * (5 * r3);\n      c += d2 >>> 13;\n      d2 &= 0x1fff;\n      var d3 = c;\n      d3 += h0 * r3;\n      d3 += h1 * r2;\n      d3 += h2 * r1;\n      d3 += h3 * r0;\n      d3 += h4 * (5 * r9);\n      c = d3 >>> 13;\n      d3 &= 0x1fff;\n      d3 += h5 * (5 * r8);\n      d3 += h6 * (5 * r7);\n      d3 += h7 * (5 * r6);\n      d3 += h8 * (5 * r5);\n      d3 += h9 * (5 * r4);\n      c += d3 >>> 13;\n      d3 &= 0x1fff;\n      var d4 = c;\n      d4 += h0 * r4;\n      d4 += h1 * r3;\n      d4 += h2 * r2;\n      d4 += h3 * r1;\n      d4 += h4 * r0;\n      c = d4 >>> 13;\n      d4 &= 0x1fff;\n      d4 += h5 * (5 * r9);\n      d4 += h6 * (5 * r8);\n      d4 += h7 * (5 * r7);\n      d4 += h8 * (5 * r6);\n      d4 += h9 * (5 * r5);\n      c += d4 >>> 13;\n      d4 &= 0x1fff;\n      var d5 = c;\n      d5 += h0 * r5;\n      d5 += h1 * r4;\n      d5 += h2 * r3;\n      d5 += h3 * r2;\n      d5 += h4 * r1;\n      c = d5 >>> 13;\n      d5 &= 0x1fff;\n      d5 += h5 * r0;\n      d5 += h6 * (5 * r9);\n      d5 += h7 * (5 * r8);\n      d5 += h8 * (5 * r7);\n      d5 += h9 * (5 * r6);\n      c += d5 >>> 13;\n      d5 &= 0x1fff;\n      var d6 = c;\n      d6 += h0 * r6;\n      d6 += h1 * r5;\n      d6 += h2 * r4;\n      d6 += h3 * r3;\n      d6 += h4 * r2;\n      c = d6 >>> 13;\n      d6 &= 0x1fff;\n      d6 += h5 * r1;\n      d6 += h6 * r0;\n      d6 += h7 * (5 * r9);\n      d6 += h8 * (5 * r8);\n      d6 += h9 * (5 * r7);\n      c += d6 >>> 13;\n      d6 &= 0x1fff;\n      var d7 = c;\n      d7 += h0 * r7;\n      d7 += h1 * r6;\n      d7 += h2 * r5;\n      d7 += h3 * r4;\n      d7 += h4 * r3;\n      c = d7 >>> 13;\n      d7 &= 0x1fff;\n      d7 += h5 * r2;\n      d7 += h6 * r1;\n      d7 += h7 * r0;\n      d7 += h8 * (5 * r9);\n      d7 += h9 * (5 * r8);\n      c += d7 >>> 13;\n      d7 &= 0x1fff;\n      var d8 = c;\n      d8 += h0 * r8;\n      d8 += h1 * r7;\n      d8 += h2 * r6;\n      d8 += h3 * r5;\n      d8 += h4 * r4;\n      c = d8 >>> 13;\n      d8 &= 0x1fff;\n      d8 += h5 * r3;\n      d8 += h6 * r2;\n      d8 += h7 * r1;\n      d8 += h8 * r0;\n      d8 += h9 * (5 * r9);\n      c += d8 >>> 13;\n      d8 &= 0x1fff;\n      var d9 = c;\n      d9 += h0 * r9;\n      d9 += h1 * r8;\n      d9 += h2 * r7;\n      d9 += h3 * r6;\n      d9 += h4 * r5;\n      c = d9 >>> 13;\n      d9 &= 0x1fff;\n      d9 += h5 * r4;\n      d9 += h6 * r3;\n      d9 += h7 * r2;\n      d9 += h8 * r1;\n      d9 += h9 * r0;\n      c += d9 >>> 13;\n      d9 &= 0x1fff;\n      c = (c << 2) + c | 0;\n      c = c + d0 | 0;\n      d0 = c & 0x1fff;\n      c = c >>> 13;\n      d1 += c;\n      h0 = d0;\n      h1 = d1;\n      h2 = d2;\n      h3 = d3;\n      h4 = d4;\n      h5 = d5;\n      h6 = d6;\n      h7 = d7;\n      h8 = d8;\n      h9 = d9;\n      mpos += 16;\n      bytes -= 16;\n    }\n\n    this._h[0] = h0;\n    this._h[1] = h1;\n    this._h[2] = h2;\n    this._h[3] = h3;\n    this._h[4] = h4;\n    this._h[5] = h5;\n    this._h[6] = h6;\n    this._h[7] = h7;\n    this._h[8] = h8;\n    this._h[9] = h9;\n  };\n\n  Poly1305.prototype.finish = function (mac, macpos) {\n    if (macpos === void 0) {\n      macpos = 0;\n    }\n\n    var g = new Uint16Array(10);\n    var c;\n    var mask;\n    var f;\n    var i;\n\n    if (this._leftover) {\n      i = this._leftover;\n      this._buffer[i++] = 1;\n\n      for (; i < 16; i++) {\n        this._buffer[i] = 0;\n      }\n\n      this._fin = 1;\n\n      this._blocks(this._buffer, 0, 16);\n    }\n\n    c = this._h[1] >>> 13;\n    this._h[1] &= 0x1fff;\n\n    for (i = 2; i < 10; i++) {\n      this._h[i] += c;\n      c = this._h[i] >>> 13;\n      this._h[i] &= 0x1fff;\n    }\n\n    this._h[0] += c * 5;\n    c = this._h[0] >>> 13;\n    this._h[0] &= 0x1fff;\n    this._h[1] += c;\n    c = this._h[1] >>> 13;\n    this._h[1] &= 0x1fff;\n    this._h[2] += c;\n    g[0] = this._h[0] + 5;\n    c = g[0] >>> 13;\n    g[0] &= 0x1fff;\n\n    for (i = 1; i < 10; i++) {\n      g[i] = this._h[i] + c;\n      c = g[i] >>> 13;\n      g[i] &= 0x1fff;\n    }\n\n    g[9] -= 1 << 13;\n    mask = (c ^ 1) - 1;\n\n    for (i = 0; i < 10; i++) {\n      g[i] &= mask;\n    }\n\n    mask = ~mask;\n\n    for (i = 0; i < 10; i++) {\n      this._h[i] = this._h[i] & mask | g[i];\n    }\n\n    this._h[0] = (this._h[0] | this._h[1] << 13) & 0xffff;\n    this._h[1] = (this._h[1] >>> 3 | this._h[2] << 10) & 0xffff;\n    this._h[2] = (this._h[2] >>> 6 | this._h[3] << 7) & 0xffff;\n    this._h[3] = (this._h[3] >>> 9 | this._h[4] << 4) & 0xffff;\n    this._h[4] = (this._h[4] >>> 12 | this._h[5] << 1 | this._h[6] << 14) & 0xffff;\n    this._h[5] = (this._h[6] >>> 2 | this._h[7] << 11) & 0xffff;\n    this._h[6] = (this._h[7] >>> 5 | this._h[8] << 8) & 0xffff;\n    this._h[7] = (this._h[8] >>> 8 | this._h[9] << 5) & 0xffff;\n    f = this._h[0] + this._pad[0];\n    this._h[0] = f & 0xffff;\n\n    for (i = 1; i < 8; i++) {\n      f = (this._h[i] + this._pad[i] | 0) + (f >>> 16) | 0;\n      this._h[i] = f & 0xffff;\n    }\n\n    mac[macpos + 0] = this._h[0] >>> 0;\n    mac[macpos + 1] = this._h[0] >>> 8;\n    mac[macpos + 2] = this._h[1] >>> 0;\n    mac[macpos + 3] = this._h[1] >>> 8;\n    mac[macpos + 4] = this._h[2] >>> 0;\n    mac[macpos + 5] = this._h[2] >>> 8;\n    mac[macpos + 6] = this._h[3] >>> 0;\n    mac[macpos + 7] = this._h[3] >>> 8;\n    mac[macpos + 8] = this._h[4] >>> 0;\n    mac[macpos + 9] = this._h[4] >>> 8;\n    mac[macpos + 10] = this._h[5] >>> 0;\n    mac[macpos + 11] = this._h[5] >>> 8;\n    mac[macpos + 12] = this._h[6] >>> 0;\n    mac[macpos + 13] = this._h[6] >>> 8;\n    mac[macpos + 14] = this._h[7] >>> 0;\n    mac[macpos + 15] = this._h[7] >>> 8;\n    this._finished = true;\n    return this;\n  };\n\n  Poly1305.prototype.update = function (m) {\n    var mpos = 0;\n    var bytes = m.length;\n    var want;\n\n    if (this._leftover) {\n      want = 16 - this._leftover;\n\n      if (want > bytes) {\n        want = bytes;\n      }\n\n      for (var i = 0; i < want; i++) {\n        this._buffer[this._leftover + i] = m[mpos + i];\n      }\n\n      bytes -= want;\n      mpos += want;\n      this._leftover += want;\n\n      if (this._leftover < 16) {\n        return this;\n      }\n\n      this._blocks(this._buffer, 0, 16);\n\n      this._leftover = 0;\n    }\n\n    if (bytes >= 16) {\n      want = bytes - bytes % 16;\n\n      this._blocks(m, mpos, want);\n\n      mpos += want;\n      bytes -= want;\n    }\n\n    if (bytes) {\n      for (var i = 0; i < bytes; i++) {\n        this._buffer[this._leftover + i] = m[mpos + i];\n      }\n\n      this._leftover += bytes;\n    }\n\n    return this;\n  };\n\n  Poly1305.prototype.digest = function () {\n    // TODO(dchest): it behaves differently than other hashes/HMAC,\n    // because it throws when finished — others just return saved result.\n    if (this._finished) {\n      throw new Error(\"Poly1305 was finished\");\n    }\n\n    var mac = new Uint8Array(16);\n    this.finish(mac);\n    return mac;\n  };\n\n  Poly1305.prototype.clean = function () {\n    wipe_1.wipe(this._buffer);\n    wipe_1.wipe(this._r);\n    wipe_1.wipe(this._h);\n    wipe_1.wipe(this._pad);\n    this._leftover = 0;\n    this._fin = 0;\n    this._finished = true; // mark as finished even if not\n\n    return this;\n  };\n\n  return Poly1305;\n}();\n\nexports.Poly1305 = Poly1305;\n/**\n * Returns 16-byte authenticator of data using a one-time 32-byte key.\n *\n * Important: key should be used for only one message, it should never repeat.\n */\n\nfunction oneTimeAuth(key, data) {\n  var h = new Poly1305(key);\n  h.update(data);\n  var digest = h.digest();\n  h.clean();\n  return digest;\n}\n\nexports.oneTimeAuth = oneTimeAuth;\n/**\n * Returns true if two authenticators are 16-byte long and equal.\n * Uses contant-time comparison to avoid leaking timing information.\n */\n\nfunction equal(a, b) {\n  if (a.length !== exports.DIGEST_LENGTH || b.length !== exports.DIGEST_LENGTH) {\n    return false;\n  }\n\n  return constant_time_1.equal(a, b);\n}\n\nexports.equal = equal;","map":{"version":3,"mappings":"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","names":["exports","key","Uint8Array","Uint16Array","t0","_r","t1","t2","t3","t4","t5","t6","t7","_pad","Poly1305","m","mpos","bytes","hibit","_fin","h0","_h","h1","h2","h3","h4","h5","h6","h7","h8","h9","r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","c","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","mac","macpos","g","mask","f","i","_leftover","_buffer","_blocks","_finished","length","want","Error","finish","wipe_1","oneTimeAuth","data","h","update","digest","clean","equal","a","b","constant_time_1"],"sources":["C:\\Users\\USER\\Documents\\demo-react\\node_modules\\@stablelib\\poly1305\\poly1305.ts"],"sourcesContent":["// Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\n\n/**\n * Package poly1305 implements Poly1305 one-time message authentication algorithm.\n */\n\nimport { equal as constantTimeEqual } from \"@stablelib/constant-time\";\nimport { wipe } from \"@stablelib/wipe\";\n\nexport const DIGEST_LENGTH = 16;\n\n// Port of Andrew Moon's Poly1305-donna-16. Public domain.\n// https://github.com/floodyberry/poly1305-donna\n\n/**\n * Poly1305 computes 16-byte authenticator of message using\n * a one-time 32-byte key.\n *\n * Important: key should be used for only one message,\n * it should never repeat.\n */\nexport class Poly1305 {\n    readonly digestLength = DIGEST_LENGTH;\n\n    private _buffer = new Uint8Array(16);\n    private _r = new Uint16Array(10);\n    private _h = new Uint16Array(10);\n    private _pad = new Uint16Array(8);\n    private _leftover = 0;\n    private _fin = 0;\n    private _finished = false;\n\n    constructor(key: Uint8Array) {\n        let t0 = key[0] | key[1] << 8; this._r[0] = (t0) & 0x1fff;\n        let t1 = key[2] | key[3] << 8; this._r[1] = ((t0 >>> 13) | (t1 << 3)) & 0x1fff;\n        let t2 = key[4] | key[5] << 8; this._r[2] = ((t1 >>> 10) | (t2 << 6)) & 0x1f03;\n        let t3 = key[6] | key[7] << 8; this._r[3] = ((t2 >>> 7) | (t3 << 9)) & 0x1fff;\n        let t4 = key[8] | key[9] << 8; this._r[4] = ((t3 >>> 4) | (t4 << 12)) & 0x00ff;\n        this._r[5] = ((t4 >>> 1)) & 0x1ffe;\n        let t5 = key[10] | key[11] << 8; this._r[6] = ((t4 >>> 14) | (t5 << 2)) & 0x1fff;\n        let t6 = key[12] | key[13] << 8; this._r[7] = ((t5 >>> 11) | (t6 << 5)) & 0x1f81;\n        let t7 = key[14] | key[15] << 8; this._r[8] = ((t6 >>> 8) | (t7 << 8)) & 0x1fff;\n        this._r[9] = ((t7 >>> 5)) & 0x007f;\n\n        this._pad[0] = key[16] | key[17] << 8;\n        this._pad[1] = key[18] | key[19] << 8;\n        this._pad[2] = key[20] | key[21] << 8;\n        this._pad[3] = key[22] | key[23] << 8;\n        this._pad[4] = key[24] | key[25] << 8;\n        this._pad[5] = key[26] | key[27] << 8;\n        this._pad[6] = key[28] | key[29] << 8;\n        this._pad[7] = key[30] | key[31] << 8;\n    }\n\n    private _blocks(m: Uint8Array, mpos: number, bytes: number) {\n        let hibit = this._fin ? 0 : 1 << 11;\n\n        let h0 = this._h[0],\n            h1 = this._h[1],\n            h2 = this._h[2],\n            h3 = this._h[3],\n            h4 = this._h[4],\n            h5 = this._h[5],\n            h6 = this._h[6],\n            h7 = this._h[7],\n            h8 = this._h[8],\n            h9 = this._h[9];\n\n        let r0 = this._r[0],\n            r1 = this._r[1],\n            r2 = this._r[2],\n            r3 = this._r[3],\n            r4 = this._r[4],\n            r5 = this._r[5],\n            r6 = this._r[6],\n            r7 = this._r[7],\n            r8 = this._r[8],\n            r9 = this._r[9];\n\n        while (bytes >= 16) {\n            let t0 = m[mpos + 0] | m[mpos + 1] << 8; h0 += (t0) & 0x1fff;\n            let t1 = m[mpos + 2] | m[mpos + 3] << 8; h1 += ((t0 >>> 13) | (t1 << 3)) & 0x1fff;\n            let t2 = m[mpos + 4] | m[mpos + 5] << 8; h2 += ((t1 >>> 10) | (t2 << 6)) & 0x1fff;\n            let t3 = m[mpos + 6] | m[mpos + 7] << 8; h3 += ((t2 >>> 7) | (t3 << 9)) & 0x1fff;\n            let t4 = m[mpos + 8] | m[mpos + 9] << 8; h4 += ((t3 >>> 4) | (t4 << 12)) & 0x1fff;\n            h5 += ((t4 >>> 1)) & 0x1fff;\n            let t5 = m[mpos + 10] | m[mpos + 11] << 8; h6 += ((t4 >>> 14) | (t5 << 2)) & 0x1fff;\n            let t6 = m[mpos + 12] | m[mpos + 13] << 8; h7 += ((t5 >>> 11) | (t6 << 5)) & 0x1fff;\n            let t7 = m[mpos + 14] | m[mpos + 15] << 8; h8 += ((t6 >>> 8) | (t7 << 8)) & 0x1fff;\n            h9 += ((t7 >>> 5)) | hibit;\n\n            let c = 0;\n\n            let d0 = c;\n            d0 += h0 * r0;\n            d0 += h1 * (5 * r9);\n            d0 += h2 * (5 * r8);\n            d0 += h3 * (5 * r7);\n            d0 += h4 * (5 * r6);\n            c = (d0 >>> 13); d0 &= 0x1fff;\n            d0 += h5 * (5 * r5);\n            d0 += h6 * (5 * r4);\n            d0 += h7 * (5 * r3);\n            d0 += h8 * (5 * r2);\n            d0 += h9 * (5 * r1);\n            c += (d0 >>> 13); d0 &= 0x1fff;\n\n            let d1 = c;\n            d1 += h0 * r1;\n            d1 += h1 * r0;\n            d1 += h2 * (5 * r9);\n            d1 += h3 * (5 * r8);\n            d1 += h4 * (5 * r7);\n            c = (d1 >>> 13); d1 &= 0x1fff;\n            d1 += h5 * (5 * r6);\n            d1 += h6 * (5 * r5);\n            d1 += h7 * (5 * r4);\n            d1 += h8 * (5 * r3);\n            d1 += h9 * (5 * r2);\n            c += (d1 >>> 13); d1 &= 0x1fff;\n\n            let d2 = c;\n            d2 += h0 * r2;\n            d2 += h1 * r1;\n            d2 += h2 * r0;\n            d2 += h3 * (5 * r9);\n            d2 += h4 * (5 * r8);\n            c = (d2 >>> 13); d2 &= 0x1fff;\n            d2 += h5 * (5 * r7);\n            d2 += h6 * (5 * r6);\n            d2 += h7 * (5 * r5);\n            d2 += h8 * (5 * r4);\n            d2 += h9 * (5 * r3);\n            c += (d2 >>> 13); d2 &= 0x1fff;\n\n            let d3 = c;\n            d3 += h0 * r3;\n            d3 += h1 * r2;\n            d3 += h2 * r1;\n            d3 += h3 * r0;\n            d3 += h4 * (5 * r9);\n            c = (d3 >>> 13); d3 &= 0x1fff;\n            d3 += h5 * (5 * r8);\n            d3 += h6 * (5 * r7);\n            d3 += h7 * (5 * r6);\n            d3 += h8 * (5 * r5);\n            d3 += h9 * (5 * r4);\n            c += (d3 >>> 13); d3 &= 0x1fff;\n\n            let d4 = c;\n            d4 += h0 * r4;\n            d4 += h1 * r3;\n            d4 += h2 * r2;\n            d4 += h3 * r1;\n            d4 += h4 * r0;\n            c = (d4 >>> 13); d4 &= 0x1fff;\n            d4 += h5 * (5 * r9);\n            d4 += h6 * (5 * r8);\n            d4 += h7 * (5 * r7);\n            d4 += h8 * (5 * r6);\n            d4 += h9 * (5 * r5);\n            c += (d4 >>> 13); d4 &= 0x1fff;\n\n            let d5 = c;\n            d5 += h0 * r5;\n            d5 += h1 * r4;\n            d5 += h2 * r3;\n            d5 += h3 * r2;\n            d5 += h4 * r1;\n            c = (d5 >>> 13); d5 &= 0x1fff;\n            d5 += h5 * r0;\n            d5 += h6 * (5 * r9);\n            d5 += h7 * (5 * r8);\n            d5 += h8 * (5 * r7);\n            d5 += h9 * (5 * r6);\n            c += (d5 >>> 13); d5 &= 0x1fff;\n\n            let d6 = c;\n            d6 += h0 * r6;\n            d6 += h1 * r5;\n            d6 += h2 * r4;\n            d6 += h3 * r3;\n            d6 += h4 * r2;\n            c = (d6 >>> 13); d6 &= 0x1fff;\n            d6 += h5 * r1;\n            d6 += h6 * r0;\n            d6 += h7 * (5 * r9);\n            d6 += h8 * (5 * r8);\n            d6 += h9 * (5 * r7);\n            c += (d6 >>> 13); d6 &= 0x1fff;\n\n            let d7 = c;\n            d7 += h0 * r7;\n            d7 += h1 * r6;\n            d7 += h2 * r5;\n            d7 += h3 * r4;\n            d7 += h4 * r3;\n            c = (d7 >>> 13); d7 &= 0x1fff;\n            d7 += h5 * r2;\n            d7 += h6 * r1;\n            d7 += h7 * r0;\n            d7 += h8 * (5 * r9);\n            d7 += h9 * (5 * r8);\n            c += (d7 >>> 13); d7 &= 0x1fff;\n\n            let d8 = c;\n            d8 += h0 * r8;\n            d8 += h1 * r7;\n            d8 += h2 * r6;\n            d8 += h3 * r5;\n            d8 += h4 * r4;\n            c = (d8 >>> 13); d8 &= 0x1fff;\n            d8 += h5 * r3;\n            d8 += h6 * r2;\n            d8 += h7 * r1;\n            d8 += h8 * r0;\n            d8 += h9 * (5 * r9);\n            c += (d8 >>> 13); d8 &= 0x1fff;\n\n            let d9 = c;\n            d9 += h0 * r9;\n            d9 += h1 * r8;\n            d9 += h2 * r7;\n            d9 += h3 * r6;\n            d9 += h4 * r5;\n            c = (d9 >>> 13); d9 &= 0x1fff;\n            d9 += h5 * r4;\n            d9 += h6 * r3;\n            d9 += h7 * r2;\n            d9 += h8 * r1;\n            d9 += h9 * r0;\n            c += (d9 >>> 13); d9 &= 0x1fff;\n\n            c = (((c << 2) + c)) | 0;\n            c = (c + d0) | 0;\n            d0 = c & 0x1fff;\n            c = (c >>> 13);\n            d1 += c;\n\n            h0 = d0;\n            h1 = d1;\n            h2 = d2;\n            h3 = d3;\n            h4 = d4;\n            h5 = d5;\n            h6 = d6;\n            h7 = d7;\n            h8 = d8;\n            h9 = d9;\n\n            mpos += 16;\n            bytes -= 16;\n        }\n        this._h[0] = h0;\n        this._h[1] = h1;\n        this._h[2] = h2;\n        this._h[3] = h3;\n        this._h[4] = h4;\n        this._h[5] = h5;\n        this._h[6] = h6;\n        this._h[7] = h7;\n        this._h[8] = h8;\n        this._h[9] = h9;\n    }\n\n    finish(mac: Uint8Array, macpos = 0): this {\n        const g = new Uint16Array(10);\n        let c: number;\n        let mask: number;\n        let f: number;\n        let i: number;\n\n        if (this._leftover) {\n            i = this._leftover;\n            this._buffer[i++] = 1;\n            for (; i < 16; i++) {\n                this._buffer[i] = 0;\n            }\n            this._fin = 1;\n            this._blocks(this._buffer, 0, 16);\n        }\n\n        c = this._h[1] >>> 13;\n        this._h[1] &= 0x1fff;\n        for (i = 2; i < 10; i++) {\n            this._h[i] += c;\n            c = this._h[i] >>> 13;\n            this._h[i] &= 0x1fff;\n        }\n        this._h[0] += (c * 5);\n        c = this._h[0] >>> 13;\n        this._h[0] &= 0x1fff;\n        this._h[1] += c;\n        c = this._h[1] >>> 13;\n        this._h[1] &= 0x1fff;\n        this._h[2] += c;\n\n        g[0] = this._h[0] + 5;\n        c = g[0] >>> 13;\n        g[0] &= 0x1fff;\n        for (i = 1; i < 10; i++) {\n            g[i] = this._h[i] + c;\n            c = g[i] >>> 13;\n            g[i] &= 0x1fff;\n        }\n        g[9] -= (1 << 13);\n\n        mask = (c ^ 1) - 1;\n        for (i = 0; i < 10; i++) {\n            g[i] &= mask;\n        }\n        mask = ~mask;\n        for (i = 0; i < 10; i++) {\n            this._h[i] = (this._h[i] & mask) | g[i];\n        }\n\n        this._h[0] = ((this._h[0]) | (this._h[1] << 13)) & 0xffff;\n        this._h[1] = ((this._h[1] >>> 3) | (this._h[2] << 10)) & 0xffff;\n        this._h[2] = ((this._h[2] >>> 6) | (this._h[3] << 7)) & 0xffff;\n        this._h[3] = ((this._h[3] >>> 9) | (this._h[4] << 4)) & 0xffff;\n        this._h[4] = ((this._h[4] >>> 12) | (this._h[5] << 1) | (this._h[6] << 14)) & 0xffff;\n        this._h[5] = ((this._h[6] >>> 2) | (this._h[7] << 11)) & 0xffff;\n        this._h[6] = ((this._h[7] >>> 5) | (this._h[8] << 8)) & 0xffff;\n        this._h[7] = ((this._h[8] >>> 8) | (this._h[9] << 5)) & 0xffff;\n\n        f = this._h[0] + this._pad[0];\n        this._h[0] = f & 0xffff;\n        for (i = 1; i < 8; i++) {\n            f = (((this._h[i] + this._pad[i]) | 0) + (f >>> 16)) | 0;\n            this._h[i] = f & 0xffff;\n        }\n\n        mac[macpos + 0] = this._h[0] >>> 0;\n        mac[macpos + 1] = this._h[0] >>> 8;\n        mac[macpos + 2] = this._h[1] >>> 0;\n        mac[macpos + 3] = this._h[1] >>> 8;\n        mac[macpos + 4] = this._h[2] >>> 0;\n        mac[macpos + 5] = this._h[2] >>> 8;\n        mac[macpos + 6] = this._h[3] >>> 0;\n        mac[macpos + 7] = this._h[3] >>> 8;\n        mac[macpos + 8] = this._h[4] >>> 0;\n        mac[macpos + 9] = this._h[4] >>> 8;\n        mac[macpos + 10] = this._h[5] >>> 0;\n        mac[macpos + 11] = this._h[5] >>> 8;\n        mac[macpos + 12] = this._h[6] >>> 0;\n        mac[macpos + 13] = this._h[6] >>> 8;\n        mac[macpos + 14] = this._h[7] >>> 0;\n        mac[macpos + 15] = this._h[7] >>> 8;\n\n        this._finished = true;\n        return this;\n    }\n\n    update(m: Uint8Array): this {\n        let mpos = 0;\n        let bytes = m.length;\n        let want: number;\n\n        if (this._leftover) {\n            want = (16 - this._leftover);\n            if (want > bytes) {\n                want = bytes;\n            }\n            for (let i = 0; i < want; i++) {\n                this._buffer[this._leftover + i] = m[mpos + i];\n            }\n            bytes -= want;\n            mpos += want;\n            this._leftover += want;\n            if (this._leftover < 16) {\n                return this;\n            }\n            this._blocks(this._buffer, 0, 16);\n            this._leftover = 0;\n        }\n\n        if (bytes >= 16) {\n            want = bytes - (bytes % 16);\n            this._blocks(m, mpos, want);\n            mpos += want;\n            bytes -= want;\n        }\n\n        if (bytes) {\n            for (let i = 0; i < bytes; i++) {\n                this._buffer[this._leftover + i] = m[mpos + i];\n            }\n            this._leftover += bytes;\n        }\n\n        return this;\n    }\n\n    digest(): Uint8Array {\n        // TODO(dchest): it behaves differently than other hashes/HMAC,\n        // because it throws when finished — others just return saved result.\n        if (this._finished) {\n            throw new Error(\"Poly1305 was finished\");\n        }\n        let mac = new Uint8Array(16);\n        this.finish(mac);\n        return mac;\n    }\n\n    clean(): this {\n        wipe(this._buffer);\n        wipe(this._r);\n        wipe(this._h);\n        wipe(this._pad);\n        this._leftover = 0;\n        this._fin = 0;\n        this._finished = true; // mark as finished even if not\n        return this;\n    }\n}\n\n/**\n * Returns 16-byte authenticator of data using a one-time 32-byte key.\n *\n * Important: key should be used for only one message, it should never repeat.\n */\nexport function oneTimeAuth(key: Uint8Array, data: Uint8Array): Uint8Array {\n    const h = new Poly1305(key);\n    h.update(data);\n    const digest = h.digest();\n    h.clean();\n    return digest;\n}\n\n/**\n * Returns true if two authenticators are 16-byte long and equal.\n * Uses contant-time comparison to avoid leaking timing information.\n */\nexport function equal(a: Uint8Array, b: Uint8Array): boolean {\n    if (a.length !== DIGEST_LENGTH || b.length !== DIGEST_LENGTH) {\n        return false;\n    }\n    return constantTimeEqual(a, b);\n}\n"]},"metadata":{},"sourceType":"script"}