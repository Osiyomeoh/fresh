{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HeartBeat = void 0;\n\nconst tslib_1 = require(\"tslib\");\n\nconst events_1 = require(\"events\");\n\nconst time_1 = require(\"@walletconnect/time\");\n\nconst types_1 = require(\"./types\");\n\nconst constants_1 = require(\"./constants\");\n\nclass HeartBeat extends types_1.IHeartBeat {\n  constructor(opts) {\n    super(opts);\n    this.events = new events_1.EventEmitter();\n    this.interval = constants_1.HEARTBEAT_INTERVAL;\n    this.interval = (opts === null || opts === void 0 ? void 0 : opts.interval) || constants_1.HEARTBEAT_INTERVAL;\n  }\n\n  static init(opts) {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      const heartbeat = new HeartBeat(opts);\n      yield heartbeat.init();\n      return heartbeat;\n    });\n  }\n\n  init() {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      yield this.initialize();\n    });\n  }\n\n  stop() {\n    clearInterval(this.intervalRef);\n  }\n\n  on(event, listener) {\n    this.events.on(event, listener);\n  }\n\n  once(event, listener) {\n    this.events.once(event, listener);\n  }\n\n  off(event, listener) {\n    this.events.off(event, listener);\n  }\n\n  removeListener(event, listener) {\n    this.events.removeListener(event, listener);\n  }\n\n  initialize() {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      this.intervalRef = setInterval(() => this.pulse(), time_1.toMiliseconds(this.interval));\n    });\n  }\n\n  pulse() {\n    this.events.emit(constants_1.HEARTBEAT_EVENTS.pulse);\n  }\n\n}\n\nexports.HeartBeat = HeartBeat;","map":{"version":3,"mappings":";;;;;;;;;AAAA;;AACA;;AAEA;;AAEA;;AAEA,MAAaA,SAAb,SAA+BC,kBAA/B,CAAyC;EAYvCC,YAAYC,IAAZ,EAAmC;IACjC,MAAMA,IAAN;IANK,cAAS,IAAIC,qBAAJ,EAAT;IAEA,gBAAWC,8BAAX;IAKL,KAAKC,QAAL,GAAgB,KAAI,SAAJ,QAAI,WAAJ,GAAI,MAAJ,OAAI,CAAEA,QAAN,KAAkBD,8BAAlC;EACD;;EAdgB,OAAJE,IAAI,CAACJ,IAAD,EAAwB;;MACvC,MAAMK,SAAS,GAAG,IAAIR,SAAJ,CAAcG,IAAd,CAAlB;MACA,MAAMK,SAAS,CAACD,IAAV,EAAN;MACA,OAAOC,SAAP;IACD;EAAA;;EAYYD,IAAI;;MACf,MAAM,KAAKE,UAAL,EAAN;IACD;EAAA;;EAEMC,IAAI;IACTC,aAAa,CAAC,KAAKC,WAAN,CAAb;EACD;;EAEMC,EAAE,CAACC,KAAD,EAAgBC,QAAhB,EAA6B;IACpC,KAAKC,MAAL,CAAYH,EAAZ,CAAeC,KAAf,EAAsBC,QAAtB;EACD;;EAEME,IAAI,CAACH,KAAD,EAAgBC,QAAhB,EAA6B;IACtC,KAAKC,MAAL,CAAYC,IAAZ,CAAiBH,KAAjB,EAAwBC,QAAxB;EACD;;EAEMG,GAAG,CAACJ,KAAD,EAAgBC,QAAhB,EAA6B;IACrC,KAAKC,MAAL,CAAYE,GAAZ,CAAgBJ,KAAhB,EAAuBC,QAAvB;EACD;;EAEMI,cAAc,CAACL,KAAD,EAAgBC,QAAhB,EAA6B;IAChD,KAAKC,MAAL,CAAYG,cAAZ,CAA2BL,KAA3B,EAAkCC,QAAlC;EACD;;EAIaN,UAAU;;MACtB,KAAKG,WAAL,GAAmBQ,WAAW,CAAC,MAAM,KAAKC,KAAL,EAAP,EAAqBC,qBAAc,KAAKhB,QAAnB,CAArB,CAA9B;IACD;EAAA;;EAEOe,KAAK;IACX,KAAKL,MAAL,CAAYO,IAAZ,CAAiBlB,6BAAiBgB,KAAlC;EACD;;AAjDsC;;AAAzCG","names":["HeartBeat","types_1","constructor","opts","events_1","constants_1","interval","init","heartbeat","initialize","stop","clearInterval","intervalRef","on","event","listener","events","once","off","removeListener","setInterval","pulse","time_1","emit","exports"],"sources":["../../src/heartbeat.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}