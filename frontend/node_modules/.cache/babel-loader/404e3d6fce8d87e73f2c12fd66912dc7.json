{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\demo-react\\\\src\\\\features\\\\add-file\\\\modal.tsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useContext, useState } from 'react';\nimport { PrimaryButton, SecondaryButton } from '../../common/components/Buttons';\nimport { InputWithValidation } from '../../common/form/InputWithValidation';\nimport { H1 } from '../../common/styles/typography';\nimport { ModalContext } from '../../context';\nimport { useDropzone } from 'react-dropzone';\nimport { classNames } from '../../util/classnames';\nimport { toast } from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const AddFileModalContents = _ref => {\n  _s();\n\n  let {\n    onSave\n  } = _ref;\n  const modalContext = useContext(ModalContext);\n  const [nameValue, setNameValue] = useState('');\n  const [nameValidationError, setNameValidationError] = useState(null);\n  const [descriptionValue, setDescriptionValue] = useState('');\n  const [selectedFiles, setSelectedFiles] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const validateName = useCallback(() => {\n    if (nameValue.length === 0) {\n      setNameValidationError('Name is required');\n      return false;\n    }\n\n    setNameValidationError(null);\n    return true;\n  }, [nameValue.length]);\n  const onDrop = useCallback(acceptedFiles => {\n    // Do something with the files\n    setSelectedFiles(acceptedFiles);\n  }, []);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    maxSize: 5e6,\n    accept: {\n      'application/pdf': ['.pdf']\n    },\n    disabled: (selectedFiles === null || selectedFiles === void 0 ? void 0 : selectedFiles.length) > 0,\n    maxFiles: 1,\n    onDropRejected: () => {\n      toast.error('File must be a PDF <= 5 MB');\n    }\n  });\n  const validate = useCallback(() => {\n    return validateName() && (selectedFiles === null || selectedFiles === void 0 ? void 0 : selectedFiles.length);\n  }, [selectedFiles === null || selectedFiles === void 0 ? void 0 : selectedFiles.length, validateName]);\n  const handleUpload = useCallback(async () => {\n    if (!validate()) {\n      return;\n    }\n\n    await onSave({\n      name: nameValue,\n      description: descriptionValue || null,\n      rolesRequired: [],\n      file: selectedFiles[0]\n    });\n    modalContext.hide();\n  }, [descriptionValue, modalContext, nameValue, onSave, selectedFiles, validate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col divide-y divide-gray-100 w-[420px]\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col flex-grow w-full space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(H1, {\n        children: \"Add File\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputWithValidation, {\n        value: nameValue,\n        validationError: nameValidationError,\n        label: \"File Name\",\n        onTextChange: setNameValue,\n        onFocus: () => setNameValidationError(null),\n        onBlur: validateName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputWithValidation, {\n        value: descriptionValue,\n        label: \"Description\",\n        onTextChange: setDescriptionValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", { ...getRootProps(),\n        className: classNames('flex items-center justify-center w-full h-16 px-4 text-sm bg-gray-100 border border-gray-100', !(selectedFiles !== null && selectedFiles !== void 0 && selectedFiles.length) && 'cursor-pointer'),\n        children: (selectedFiles === null || selectedFiles === void 0 ? void 0 : selectedFiles.length) > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"flex flex-col w-full pl-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-bold text-md\",\n            children: \"Selected File\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), selectedFiles.map((selectedFile, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"text-sm list-disc\",\n            children: selectedFile.name\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this), isDragActive ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Drop your PDF here...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Drop a PDF here or click to select one\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-row items-center justify-end flex-shrink-0 pt-8 mt-8 space-x-2\",\n      children: [/*#__PURE__*/_jsxDEV(SecondaryButton, {\n        onClick: modalContext.hide,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PrimaryButton, {\n        onClick: async () => {\n          if (loading || !validate()) {\n            return;\n          }\n\n          try {\n            setLoading(true);\n            await handleUpload();\n            modalContext.hide();\n          } catch (err) {\n            console.error('Error creating file', err);\n            toast.error('Error creating file. Check the console for more information', {\n              duration: 3000,\n              id: 'file-error'\n            });\n          } finally {\n            setLoading(false);\n          }\n        },\n        children: loading ? 'Uploading...' : 'Upload'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddFileModalContents, \"SgXhJkfgIXSVgXaKxiEnNXIVHdM=\", false, function () {\n  return [useDropzone];\n});\n\n_c = AddFileModalContents;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddFileModalContents\");","map":{"version":3,"names":["useCallback","useContext","useState","PrimaryButton","SecondaryButton","InputWithValidation","H1","ModalContext","useDropzone","classNames","toast","AddFileModalContents","onSave","modalContext","nameValue","setNameValue","nameValidationError","setNameValidationError","descriptionValue","setDescriptionValue","selectedFiles","setSelectedFiles","loading","setLoading","validateName","length","onDrop","acceptedFiles","getRootProps","getInputProps","isDragActive","maxSize","accept","disabled","maxFiles","onDropRejected","error","validate","handleUpload","name","description","rolesRequired","file","hide","map","selectedFile","idx","err","console","duration","id"],"sources":["C:/Users/USER/Documents/demo-react/src/features/add-file/modal.tsx"],"sourcesContent":["import { useCallback, useContext, useState } from 'react';\r\nimport {\r\n  PrimaryButton,\r\n  SecondaryButton,\r\n} from '../../common/components/Buttons';\r\nimport { InputWithValidation } from '../../common/form/InputWithValidation';\r\nimport { H1 } from '../../common/styles/typography';\r\nimport { ModalContext } from '../../context';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { classNames } from '../../util/classnames';\r\nimport { toast } from 'react-hot-toast';\r\n\r\ntype Props = {\r\n  onSave: (input: {\r\n    name: string;\r\n    description: string | null;\r\n    rolesRequired: string[];\r\n    file: File;\r\n  }) => Promise<void>;\r\n};\r\n\r\nexport const AddFileModalContents = ({ onSave }: Props) => {\r\n  const modalContext = useContext(ModalContext);\r\n\r\n  const [nameValue, setNameValue] = useState('');\r\n  const [nameValidationError, setNameValidationError] = useState<string>(null);\r\n  const [descriptionValue, setDescriptionValue] = useState('');\r\n\r\n  const [selectedFiles, setSelectedFiles] = useState<File[]>(null);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const validateName = useCallback(() => {\r\n    if (nameValue.length === 0) {\r\n      setNameValidationError('Name is required');\r\n      return false;\r\n    }\r\n    setNameValidationError(null);\r\n    return true;\r\n  }, [nameValue.length]);\r\n\r\n  const onDrop = useCallback((acceptedFiles) => {\r\n    // Do something with the files\r\n    setSelectedFiles(acceptedFiles);\r\n  }, []);\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    maxSize: 5e6,\r\n    accept: { 'application/pdf': ['.pdf'] },\r\n    disabled: selectedFiles?.length > 0,\r\n    maxFiles: 1,\r\n    onDropRejected: () => {\r\n      toast.error('File must be a PDF <= 5 MB');\r\n    },\r\n  });\r\n\r\n  const validate = useCallback(() => {\r\n    return validateName() && selectedFiles?.length;\r\n  }, [selectedFiles?.length, validateName]);\r\n\r\n  const handleUpload = useCallback(async () => {\r\n    if (!validate()) {\r\n      return;\r\n    }\r\n\r\n    await onSave({\r\n      name: nameValue,\r\n      description: descriptionValue || null,\r\n      rolesRequired: [],\r\n      file: selectedFiles[0],\r\n    });\r\n    modalContext.hide();\r\n  }, [\r\n    descriptionValue,\r\n    modalContext,\r\n    nameValue,\r\n    onSave,\r\n    selectedFiles,\r\n    validate,\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col divide-y divide-gray-100 w-[420px]\">\r\n      <div className=\"flex flex-col flex-grow w-full space-y-4\">\r\n        <H1>Add File</H1>\r\n        <InputWithValidation\r\n          value={nameValue}\r\n          validationError={nameValidationError}\r\n          label=\"File Name\"\r\n          onTextChange={setNameValue}\r\n          onFocus={() => setNameValidationError(null)}\r\n          onBlur={validateName}\r\n        />\r\n        <InputWithValidation\r\n          value={descriptionValue}\r\n          label=\"Description\"\r\n          onTextChange={setDescriptionValue}\r\n        />\r\n        {/* Add role selector */}\r\n        <div\r\n          {...getRootProps()}\r\n          className={classNames(\r\n            'flex items-center justify-center w-full h-16 px-4 text-sm bg-gray-100 border border-gray-100',\r\n            !selectedFiles?.length && 'cursor-pointer'\r\n          )}\r\n        >\r\n          {selectedFiles?.length > 0 ? (\r\n            <ul className=\"flex flex-col w-full pl-2\">\r\n              <div className=\"font-bold text-md\">Selected File</div>\r\n              {selectedFiles.map((selectedFile, idx) => (\r\n                <li className=\"text-sm list-disc\" key={idx}>\r\n                  {selectedFile.name}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : (\r\n            <>\r\n              <input {...getInputProps()} />\r\n              {isDragActive ? (\r\n                <p>Drop your PDF here...</p>\r\n              ) : (\r\n                <p>Drop a PDF here or click to select one</p>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex flex-row items-center justify-end flex-shrink-0 pt-8 mt-8 space-x-2\">\r\n        <SecondaryButton onClick={modalContext.hide}>Cancel</SecondaryButton>\r\n        <PrimaryButton\r\n          onClick={async () => {\r\n            if (loading || !validate()) {\r\n              return;\r\n            }\r\n            try {\r\n              setLoading(true);\r\n              await handleUpload();\r\n              modalContext.hide();\r\n            } catch (err) {\r\n              console.error('Error creating file', err);\r\n              toast.error(\r\n                'Error creating file. Check the console for more information',\r\n                {\r\n                  duration: 3000,\r\n                  id: 'file-error',\r\n                }\r\n              );\r\n            } finally {\r\n              setLoading(false);\r\n            }\r\n          }}\r\n        >\r\n          {loading ? 'Uploading...' : 'Upload'}\r\n        </PrimaryButton>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}