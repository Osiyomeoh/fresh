{"ast":null,"code":"\"use strict\"; // Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sharedKey = exports.generateKeyPair = exports.generateKeyPairFromSeed = exports.scalarMultBase = exports.scalarMult = exports.SHARED_KEY_LENGTH = exports.SECRET_KEY_LENGTH = exports.PUBLIC_KEY_LENGTH = void 0;\n/**\n * Package x25519 implements X25519 key agreement.\n */\n\nconst random_1 = require(\"@stablelib/random\");\n\nconst wipe_1 = require(\"@stablelib/wipe\");\n\nexports.PUBLIC_KEY_LENGTH = 32;\nexports.SECRET_KEY_LENGTH = 32;\nexports.SHARED_KEY_LENGTH = 32; // Returns new zero-filled 16-element GF (Float64Array).\n// If passed an array of numbers, prefills the returned\n// array with them.\n//\n// We use Float64Array, because we need 48-bit numbers\n// for this implementation.\n\nfunction gf(init) {\n  const r = new Float64Array(16);\n\n  if (init) {\n    for (let i = 0; i < init.length; i++) {\n      r[i] = init[i];\n    }\n  }\n\n  return r;\n} // Base point.\n\n\nconst _9 = new Uint8Array(32);\n\n_9[0] = 9;\n\nconst _121665 = gf([0xdb41, 1]);\n\nfunction car25519(o) {\n  let c = 1;\n\n  for (let i = 0; i < 16; i++) {\n    let v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n\n  o[0] += c - 1 + 37 * (c - 1);\n}\n\nfunction sel25519(p, q, b) {\n  const c = ~(b - 1);\n\n  for (let i = 0; i < 16; i++) {\n    const t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  const m = gf();\n  const t = gf();\n\n  for (let i = 0; i < 16; i++) {\n    t[i] = n[i];\n  }\n\n  car25519(t);\n  car25519(t);\n  car25519(t);\n\n  for (let j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n\n    for (let i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - (m[i - 1] >> 16 & 1);\n      m[i - 1] &= 0xffff;\n    }\n\n    m[15] = t[15] - 0x7fff - (m[14] >> 16 & 1);\n    const b = m[15] >> 16 & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1 - b);\n  }\n\n  for (let i = 0; i < 16; i++) {\n    o[2 * i] = t[i] & 0xff;\n    o[2 * i + 1] = t[i] >> 8;\n  }\n}\n\nfunction unpack25519(o, n) {\n  for (let i = 0; i < 16; i++) {\n    o[i] = n[2 * i] + (n[2 * i + 1] << 8);\n  }\n\n  o[15] &= 0x7fff;\n}\n\nfunction add(o, a, b) {\n  for (let i = 0; i < 16; i++) {\n    o[i] = a[i] + b[i];\n  }\n}\n\nfunction sub(o, a, b) {\n  for (let i = 0; i < 16; i++) {\n    o[i] = a[i] - b[i];\n  }\n}\n\nfunction mul(o, a, b) {\n  let v,\n      c,\n      t0 = 0,\n      t1 = 0,\n      t2 = 0,\n      t3 = 0,\n      t4 = 0,\n      t5 = 0,\n      t6 = 0,\n      t7 = 0,\n      t8 = 0,\n      t9 = 0,\n      t10 = 0,\n      t11 = 0,\n      t12 = 0,\n      t13 = 0,\n      t14 = 0,\n      t15 = 0,\n      t16 = 0,\n      t17 = 0,\n      t18 = 0,\n      t19 = 0,\n      t20 = 0,\n      t21 = 0,\n      t22 = 0,\n      t23 = 0,\n      t24 = 0,\n      t25 = 0,\n      t26 = 0,\n      t27 = 0,\n      t28 = 0,\n      t29 = 0,\n      t30 = 0,\n      b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11],\n      b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n  t0 += 38 * t16;\n  t1 += 38 * t17;\n  t2 += 38 * t18;\n  t3 += 38 * t19;\n  t4 += 38 * t20;\n  t5 += 38 * t21;\n  t6 += 38 * t22;\n  t7 += 38 * t23;\n  t8 += 38 * t24;\n  t9 += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30; // t15 left as is\n  // first car\n\n  c = 1;\n  v = t0 + c + 65535;\n  c = Math.floor(v / 65536);\n  t0 = v - c * 65536;\n  v = t1 + c + 65535;\n  c = Math.floor(v / 65536);\n  t1 = v - c * 65536;\n  v = t2 + c + 65535;\n  c = Math.floor(v / 65536);\n  t2 = v - c * 65536;\n  v = t3 + c + 65535;\n  c = Math.floor(v / 65536);\n  t3 = v - c * 65536;\n  v = t4 + c + 65535;\n  c = Math.floor(v / 65536);\n  t4 = v - c * 65536;\n  v = t5 + c + 65535;\n  c = Math.floor(v / 65536);\n  t5 = v - c * 65536;\n  v = t6 + c + 65535;\n  c = Math.floor(v / 65536);\n  t6 = v - c * 65536;\n  v = t7 + c + 65535;\n  c = Math.floor(v / 65536);\n  t7 = v - c * 65536;\n  v = t8 + c + 65535;\n  c = Math.floor(v / 65536);\n  t8 = v - c * 65536;\n  v = t9 + c + 65535;\n  c = Math.floor(v / 65536);\n  t9 = v - c * 65536;\n  v = t10 + c + 65535;\n  c = Math.floor(v / 65536);\n  t10 = v - c * 65536;\n  v = t11 + c + 65535;\n  c = Math.floor(v / 65536);\n  t11 = v - c * 65536;\n  v = t12 + c + 65535;\n  c = Math.floor(v / 65536);\n  t12 = v - c * 65536;\n  v = t13 + c + 65535;\n  c = Math.floor(v / 65536);\n  t13 = v - c * 65536;\n  v = t14 + c + 65535;\n  c = Math.floor(v / 65536);\n  t14 = v - c * 65536;\n  v = t15 + c + 65535;\n  c = Math.floor(v / 65536);\n  t15 = v - c * 65536;\n  t0 += c - 1 + 37 * (c - 1); // second car\n\n  c = 1;\n  v = t0 + c + 65535;\n  c = Math.floor(v / 65536);\n  t0 = v - c * 65536;\n  v = t1 + c + 65535;\n  c = Math.floor(v / 65536);\n  t1 = v - c * 65536;\n  v = t2 + c + 65535;\n  c = Math.floor(v / 65536);\n  t2 = v - c * 65536;\n  v = t3 + c + 65535;\n  c = Math.floor(v / 65536);\n  t3 = v - c * 65536;\n  v = t4 + c + 65535;\n  c = Math.floor(v / 65536);\n  t4 = v - c * 65536;\n  v = t5 + c + 65535;\n  c = Math.floor(v / 65536);\n  t5 = v - c * 65536;\n  v = t6 + c + 65535;\n  c = Math.floor(v / 65536);\n  t6 = v - c * 65536;\n  v = t7 + c + 65535;\n  c = Math.floor(v / 65536);\n  t7 = v - c * 65536;\n  v = t8 + c + 65535;\n  c = Math.floor(v / 65536);\n  t8 = v - c * 65536;\n  v = t9 + c + 65535;\n  c = Math.floor(v / 65536);\n  t9 = v - c * 65536;\n  v = t10 + c + 65535;\n  c = Math.floor(v / 65536);\n  t10 = v - c * 65536;\n  v = t11 + c + 65535;\n  c = Math.floor(v / 65536);\n  t11 = v - c * 65536;\n  v = t12 + c + 65535;\n  c = Math.floor(v / 65536);\n  t12 = v - c * 65536;\n  v = t13 + c + 65535;\n  c = Math.floor(v / 65536);\n  t13 = v - c * 65536;\n  v = t14 + c + 65535;\n  c = Math.floor(v / 65536);\n  t14 = v - c * 65536;\n  v = t15 + c + 65535;\n  c = Math.floor(v / 65536);\n  t15 = v - c * 65536;\n  t0 += c - 1 + 37 * (c - 1);\n  o[0] = t0;\n  o[1] = t1;\n  o[2] = t2;\n  o[3] = t3;\n  o[4] = t4;\n  o[5] = t5;\n  o[6] = t6;\n  o[7] = t7;\n  o[8] = t8;\n  o[9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction square(o, a) {\n  mul(o, a, a);\n}\n\nfunction inv25519(o, inp) {\n  const c = gf();\n\n  for (let i = 0; i < 16; i++) {\n    c[i] = inp[i];\n  }\n\n  for (let i = 253; i >= 0; i--) {\n    square(c, c);\n\n    if (i !== 2 && i !== 4) {\n      mul(c, c, inp);\n    }\n  }\n\n  for (let i = 0; i < 16; i++) {\n    o[i] = c[i];\n  }\n}\n\nfunction scalarMult(n, p) {\n  const z = new Uint8Array(32);\n  const x = new Float64Array(80);\n  const a = gf(),\n        b = gf(),\n        c = gf(),\n        d = gf(),\n        e = gf(),\n        f = gf();\n\n  for (let i = 0; i < 31; i++) {\n    z[i] = n[i];\n  }\n\n  z[31] = n[31] & 127 | 64;\n  z[0] &= 248;\n  unpack25519(x, p);\n\n  for (let i = 0; i < 16; i++) {\n    b[i] = x[i];\n  }\n\n  a[0] = d[0] = 1;\n\n  for (let i = 254; i >= 0; --i) {\n    const r = z[i >>> 3] >>> (i & 7) & 1;\n    sel25519(a, b, r);\n    sel25519(c, d, r);\n    add(e, a, c);\n    sub(a, a, c);\n    add(c, b, d);\n    sub(b, b, d);\n    square(d, e);\n    square(f, a);\n    mul(a, c, a);\n    mul(c, b, e);\n    add(e, a, c);\n    sub(a, a, c);\n    square(b, a);\n    sub(c, d, f);\n    mul(a, c, _121665);\n    add(a, a, d);\n    mul(c, c, a);\n    mul(a, d, f);\n    mul(d, b, x);\n    square(b, e);\n    sel25519(a, b, r);\n    sel25519(c, d, r);\n  }\n\n  for (let i = 0; i < 16; i++) {\n    x[i + 16] = a[i];\n    x[i + 32] = c[i];\n    x[i + 48] = b[i];\n    x[i + 64] = d[i];\n  }\n\n  const x32 = x.subarray(32);\n  const x16 = x.subarray(16);\n  inv25519(x32, x32);\n  mul(x16, x16, x32);\n  const q = new Uint8Array(32);\n  pack25519(q, x16);\n  return q;\n}\n\nexports.scalarMult = scalarMult;\n\nfunction scalarMultBase(n) {\n  return scalarMult(n, _9);\n}\n\nexports.scalarMultBase = scalarMultBase;\n\nfunction generateKeyPairFromSeed(seed) {\n  if (seed.length !== exports.SECRET_KEY_LENGTH) {\n    throw new Error(`x25519: seed must be ${exports.SECRET_KEY_LENGTH} bytes`);\n  }\n\n  const secretKey = new Uint8Array(seed);\n  const publicKey = scalarMultBase(secretKey);\n  return {\n    publicKey,\n    secretKey\n  };\n}\n\nexports.generateKeyPairFromSeed = generateKeyPairFromSeed;\n\nfunction generateKeyPair(prng) {\n  const seed = (0, random_1.randomBytes)(32, prng);\n  const result = generateKeyPairFromSeed(seed);\n  (0, wipe_1.wipe)(seed);\n  return result;\n}\n\nexports.generateKeyPair = generateKeyPair;\n/**\n * Returns a shared key between our secret key and a peer's public key.\n *\n * Throws an error if the given keys are of wrong length.\n *\n * If rejectZero is true throws if the calculated shared key is all-zero.\n * From RFC 7748:\n *\n * > Protocol designers using Diffie-Hellman over the curves defined in\n * > this document must not assume \"contributory behavior\".  Specially,\n * > contributory behavior means that both parties' private keys\n * > contribute to the resulting shared key.  Since curve25519 and\n * > curve448 have cofactors of 8 and 4 (respectively), an input point of\n * > small order will eliminate any contribution from the other party's\n * > private key.  This situation can be detected by checking for the all-\n * > zero output, which implementations MAY do, as specified in Section 6.\n * > However, a large number of existing implementations do not do this.\n *\n * IMPORTANT: the returned key is a raw result of scalar multiplication.\n * To use it as a key material, hash it with a cryptographic hash function.\n */\n\nfunction sharedKey(mySecretKey, theirPublicKey) {\n  let rejectZero = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (mySecretKey.length !== exports.PUBLIC_KEY_LENGTH) {\n    throw new Error(\"X25519: incorrect secret key length\");\n  }\n\n  if (theirPublicKey.length !== exports.PUBLIC_KEY_LENGTH) {\n    throw new Error(\"X25519: incorrect public key length\");\n  }\n\n  const result = scalarMult(mySecretKey, theirPublicKey);\n\n  if (rejectZero) {\n    let zeros = 0;\n\n    for (let i = 0; i < result.length; i++) {\n      zeros |= result[i];\n    }\n\n    if (zeros === 0) {\n      throw new Error(\"X25519: invalid shared key\");\n    }\n  }\n\n  return result;\n}\n\nexports.sharedKey = sharedKey;","map":{"version":3,"mappings":"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","names":["exports","gf","init","r","Float64Array","i","length","_9","Uint8Array","_121665","car25519","o","c","v","Math","floor","sel25519","p","q","b","t","pack25519","n","m","j","unpack25519","add","a","sub","mul","t0","t1","t2","t3","t4","t5","t6","t7","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","square","inv25519","inp","scalarMult","z","x","d","e","f","x32","subarray","x16","scalarMultBase","generateKeyPairFromSeed","seed","Error","secretKey","publicKey","generateKeyPair","prng","result","sharedKey","mySecretKey","theirPublicKey","rejectZero","zeros"],"sources":["C:\\Users\\USER\\Documents\\demo-react\\node_modules\\@stablelib\\x25519\\x25519.ts"],"sourcesContent":["// Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\n\n/**\n * Package x25519 implements X25519 key agreement.\n */\n\nimport { randomBytes, RandomSource } from \"@stablelib/random\";\nimport { wipe } from \"@stablelib/wipe\";\n\nexport const PUBLIC_KEY_LENGTH = 32;\nexport const SECRET_KEY_LENGTH = 32;\nexport const SHARED_KEY_LENGTH = 32;\n\n// TODO(dchest): some functions are copies of ../sign/ed25519.\n// Find a way to combine them without opening up to public.\n\n// Ported from TweetNaCl.js, which is ported from TweetNaCl\n// by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n// https://tweetnacl.js.org\n\n// TweetNaCl contributors:\n// Daniel J. Bernstein, Bernard van Gastel, Wesley Janssen,\n// Tanja Lange, Peter Schwabe, Sjaak Smetsers.\n// Public domain.\n// https://tweetnacl.cr.yp.to/\n\ntype GF = Float64Array;\n\n// Returns new zero-filled 16-element GF (Float64Array).\n// If passed an array of numbers, prefills the returned\n// array with them.\n//\n// We use Float64Array, because we need 48-bit numbers\n// for this implementation.\nfunction gf(init?: number[]): GF {\n    const r = new Float64Array(16);\n    if (init) {\n        for (let i = 0; i < init.length; i++) {\n            r[i] = init[i];\n        }\n    }\n    return r;\n}\n\n// Base point.\nconst _9 = new Uint8Array(32); _9[0] = 9;\n\nconst _121665 = gf([0xdb41, 1]);\n\nfunction car25519(o: GF) {\n    let c = 1;\n    for (let i = 0; i < 16; i++) {\n        let v = o[i] + c + 65535;\n        c = Math.floor(v / 65536);\n        o[i] = v - c * 65536;\n    }\n    o[0] += c - 1 + 37 * (c - 1);\n}\n\nfunction sel25519(p: GF, q: GF, b: number) {\n    const c = ~(b - 1);\n    for (let i = 0; i < 16; i++) {\n        const t = c & (p[i] ^ q[i]);\n        p[i] ^= t;\n        q[i] ^= t;\n    }\n}\n\nfunction pack25519(o: Uint8Array, n: GF) {\n    const m = gf();\n    const t = gf();\n    for (let i = 0; i < 16; i++) {\n        t[i] = n[i];\n    }\n    car25519(t);\n    car25519(t);\n    car25519(t);\n    for (let j = 0; j < 2; j++) {\n        m[0] = t[0] - 0xffed;\n        for (let i = 1; i < 15; i++) {\n            m[i] = t[i] - 0xffff - ((m[i - 1] >> 16) & 1);\n            m[i - 1] &= 0xffff;\n        }\n        m[15] = t[15] - 0x7fff - ((m[14] >> 16) & 1);\n        const b = (m[15] >> 16) & 1;\n        m[14] &= 0xffff;\n        sel25519(t, m, 1 - b);\n    }\n    for (let i = 0; i < 16; i++) {\n        o[2 * i] = t[i] & 0xff;\n        o[2 * i + 1] = t[i] >> 8;\n    }\n}\n\nfunction unpack25519(o: GF, n: Uint8Array) {\n    for (let i = 0; i < 16; i++) {\n        o[i] = n[2 * i] + (n[2 * i + 1] << 8);\n    }\n    o[15] &= 0x7fff;\n}\n\nfunction add(o: GF, a: GF, b: GF) {\n    for (let i = 0; i < 16; i++) {\n        o[i] = a[i] + b[i];\n    }\n}\n\nfunction sub(o: GF, a: GF, b: GF) {\n    for (let i = 0; i < 16; i++) {\n        o[i] = a[i] - b[i];\n    }\n}\n\nfunction mul(o: GF, a: GF, b: GF) {\n    let v: number, c: number,\n        t0 = 0, t1 = 0, t2 = 0, t3 = 0, t4 = 0, t5 = 0, t6 = 0, t7 = 0,\n        t8 = 0, t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n        t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n        t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n        b0 = b[0],\n        b1 = b[1],\n        b2 = b[2],\n        b3 = b[3],\n        b4 = b[4],\n        b5 = b[5],\n        b6 = b[6],\n        b7 = b[7],\n        b8 = b[8],\n        b9 = b[9],\n        b10 = b[10],\n        b11 = b[11],\n        b12 = b[12],\n        b13 = b[13],\n        b14 = b[14],\n        b15 = b[15];\n\n    v = a[0];\n    t0 += v * b0;\n    t1 += v * b1;\n    t2 += v * b2;\n    t3 += v * b3;\n    t4 += v * b4;\n    t5 += v * b5;\n    t6 += v * b6;\n    t7 += v * b7;\n    t8 += v * b8;\n    t9 += v * b9;\n    t10 += v * b10;\n    t11 += v * b11;\n    t12 += v * b12;\n    t13 += v * b13;\n    t14 += v * b14;\n    t15 += v * b15;\n    v = a[1];\n    t1 += v * b0;\n    t2 += v * b1;\n    t3 += v * b2;\n    t4 += v * b3;\n    t5 += v * b4;\n    t6 += v * b5;\n    t7 += v * b6;\n    t8 += v * b7;\n    t9 += v * b8;\n    t10 += v * b9;\n    t11 += v * b10;\n    t12 += v * b11;\n    t13 += v * b12;\n    t14 += v * b13;\n    t15 += v * b14;\n    t16 += v * b15;\n    v = a[2];\n    t2 += v * b0;\n    t3 += v * b1;\n    t4 += v * b2;\n    t5 += v * b3;\n    t6 += v * b4;\n    t7 += v * b5;\n    t8 += v * b6;\n    t9 += v * b7;\n    t10 += v * b8;\n    t11 += v * b9;\n    t12 += v * b10;\n    t13 += v * b11;\n    t14 += v * b12;\n    t15 += v * b13;\n    t16 += v * b14;\n    t17 += v * b15;\n    v = a[3];\n    t3 += v * b0;\n    t4 += v * b1;\n    t5 += v * b2;\n    t6 += v * b3;\n    t7 += v * b4;\n    t8 += v * b5;\n    t9 += v * b6;\n    t10 += v * b7;\n    t11 += v * b8;\n    t12 += v * b9;\n    t13 += v * b10;\n    t14 += v * b11;\n    t15 += v * b12;\n    t16 += v * b13;\n    t17 += v * b14;\n    t18 += v * b15;\n    v = a[4];\n    t4 += v * b0;\n    t5 += v * b1;\n    t6 += v * b2;\n    t7 += v * b3;\n    t8 += v * b4;\n    t9 += v * b5;\n    t10 += v * b6;\n    t11 += v * b7;\n    t12 += v * b8;\n    t13 += v * b9;\n    t14 += v * b10;\n    t15 += v * b11;\n    t16 += v * b12;\n    t17 += v * b13;\n    t18 += v * b14;\n    t19 += v * b15;\n    v = a[5];\n    t5 += v * b0;\n    t6 += v * b1;\n    t7 += v * b2;\n    t8 += v * b3;\n    t9 += v * b4;\n    t10 += v * b5;\n    t11 += v * b6;\n    t12 += v * b7;\n    t13 += v * b8;\n    t14 += v * b9;\n    t15 += v * b10;\n    t16 += v * b11;\n    t17 += v * b12;\n    t18 += v * b13;\n    t19 += v * b14;\n    t20 += v * b15;\n    v = a[6];\n    t6 += v * b0;\n    t7 += v * b1;\n    t8 += v * b2;\n    t9 += v * b3;\n    t10 += v * b4;\n    t11 += v * b5;\n    t12 += v * b6;\n    t13 += v * b7;\n    t14 += v * b8;\n    t15 += v * b9;\n    t16 += v * b10;\n    t17 += v * b11;\n    t18 += v * b12;\n    t19 += v * b13;\n    t20 += v * b14;\n    t21 += v * b15;\n    v = a[7];\n    t7 += v * b0;\n    t8 += v * b1;\n    t9 += v * b2;\n    t10 += v * b3;\n    t11 += v * b4;\n    t12 += v * b5;\n    t13 += v * b6;\n    t14 += v * b7;\n    t15 += v * b8;\n    t16 += v * b9;\n    t17 += v * b10;\n    t18 += v * b11;\n    t19 += v * b12;\n    t20 += v * b13;\n    t21 += v * b14;\n    t22 += v * b15;\n    v = a[8];\n    t8 += v * b0;\n    t9 += v * b1;\n    t10 += v * b2;\n    t11 += v * b3;\n    t12 += v * b4;\n    t13 += v * b5;\n    t14 += v * b6;\n    t15 += v * b7;\n    t16 += v * b8;\n    t17 += v * b9;\n    t18 += v * b10;\n    t19 += v * b11;\n    t20 += v * b12;\n    t21 += v * b13;\n    t22 += v * b14;\n    t23 += v * b15;\n    v = a[9];\n    t9 += v * b0;\n    t10 += v * b1;\n    t11 += v * b2;\n    t12 += v * b3;\n    t13 += v * b4;\n    t14 += v * b5;\n    t15 += v * b6;\n    t16 += v * b7;\n    t17 += v * b8;\n    t18 += v * b9;\n    t19 += v * b10;\n    t20 += v * b11;\n    t21 += v * b12;\n    t22 += v * b13;\n    t23 += v * b14;\n    t24 += v * b15;\n    v = a[10];\n    t10 += v * b0;\n    t11 += v * b1;\n    t12 += v * b2;\n    t13 += v * b3;\n    t14 += v * b4;\n    t15 += v * b5;\n    t16 += v * b6;\n    t17 += v * b7;\n    t18 += v * b8;\n    t19 += v * b9;\n    t20 += v * b10;\n    t21 += v * b11;\n    t22 += v * b12;\n    t23 += v * b13;\n    t24 += v * b14;\n    t25 += v * b15;\n    v = a[11];\n    t11 += v * b0;\n    t12 += v * b1;\n    t13 += v * b2;\n    t14 += v * b3;\n    t15 += v * b4;\n    t16 += v * b5;\n    t17 += v * b6;\n    t18 += v * b7;\n    t19 += v * b8;\n    t20 += v * b9;\n    t21 += v * b10;\n    t22 += v * b11;\n    t23 += v * b12;\n    t24 += v * b13;\n    t25 += v * b14;\n    t26 += v * b15;\n    v = a[12];\n    t12 += v * b0;\n    t13 += v * b1;\n    t14 += v * b2;\n    t15 += v * b3;\n    t16 += v * b4;\n    t17 += v * b5;\n    t18 += v * b6;\n    t19 += v * b7;\n    t20 += v * b8;\n    t21 += v * b9;\n    t22 += v * b10;\n    t23 += v * b11;\n    t24 += v * b12;\n    t25 += v * b13;\n    t26 += v * b14;\n    t27 += v * b15;\n    v = a[13];\n    t13 += v * b0;\n    t14 += v * b1;\n    t15 += v * b2;\n    t16 += v * b3;\n    t17 += v * b4;\n    t18 += v * b5;\n    t19 += v * b6;\n    t20 += v * b7;\n    t21 += v * b8;\n    t22 += v * b9;\n    t23 += v * b10;\n    t24 += v * b11;\n    t25 += v * b12;\n    t26 += v * b13;\n    t27 += v * b14;\n    t28 += v * b15;\n    v = a[14];\n    t14 += v * b0;\n    t15 += v * b1;\n    t16 += v * b2;\n    t17 += v * b3;\n    t18 += v * b4;\n    t19 += v * b5;\n    t20 += v * b6;\n    t21 += v * b7;\n    t22 += v * b8;\n    t23 += v * b9;\n    t24 += v * b10;\n    t25 += v * b11;\n    t26 += v * b12;\n    t27 += v * b13;\n    t28 += v * b14;\n    t29 += v * b15;\n    v = a[15];\n    t15 += v * b0;\n    t16 += v * b1;\n    t17 += v * b2;\n    t18 += v * b3;\n    t19 += v * b4;\n    t20 += v * b5;\n    t21 += v * b6;\n    t22 += v * b7;\n    t23 += v * b8;\n    t24 += v * b9;\n    t25 += v * b10;\n    t26 += v * b11;\n    t27 += v * b12;\n    t28 += v * b13;\n    t29 += v * b14;\n    t30 += v * b15;\n\n    t0 += 38 * t16;\n    t1 += 38 * t17;\n    t2 += 38 * t18;\n    t3 += 38 * t19;\n    t4 += 38 * t20;\n    t5 += 38 * t21;\n    t6 += 38 * t22;\n    t7 += 38 * t23;\n    t8 += 38 * t24;\n    t9 += 38 * t25;\n    t10 += 38 * t26;\n    t11 += 38 * t27;\n    t12 += 38 * t28;\n    t13 += 38 * t29;\n    t14 += 38 * t30;\n    // t15 left as is\n\n    // first car\n    c = 1;\n    v = t0 + c + 65535; c = Math.floor(v / 65536); t0 = v - c * 65536;\n    v = t1 + c + 65535; c = Math.floor(v / 65536); t1 = v - c * 65536;\n    v = t2 + c + 65535; c = Math.floor(v / 65536); t2 = v - c * 65536;\n    v = t3 + c + 65535; c = Math.floor(v / 65536); t3 = v - c * 65536;\n    v = t4 + c + 65535; c = Math.floor(v / 65536); t4 = v - c * 65536;\n    v = t5 + c + 65535; c = Math.floor(v / 65536); t5 = v - c * 65536;\n    v = t6 + c + 65535; c = Math.floor(v / 65536); t6 = v - c * 65536;\n    v = t7 + c + 65535; c = Math.floor(v / 65536); t7 = v - c * 65536;\n    v = t8 + c + 65535; c = Math.floor(v / 65536); t8 = v - c * 65536;\n    v = t9 + c + 65535; c = Math.floor(v / 65536); t9 = v - c * 65536;\n    v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n    v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n    v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n    v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n    v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n    v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n    t0 += c - 1 + 37 * (c - 1);\n\n    // second car\n    c = 1;\n    v = t0 + c + 65535; c = Math.floor(v / 65536); t0 = v - c * 65536;\n    v = t1 + c + 65535; c = Math.floor(v / 65536); t1 = v - c * 65536;\n    v = t2 + c + 65535; c = Math.floor(v / 65536); t2 = v - c * 65536;\n    v = t3 + c + 65535; c = Math.floor(v / 65536); t3 = v - c * 65536;\n    v = t4 + c + 65535; c = Math.floor(v / 65536); t4 = v - c * 65536;\n    v = t5 + c + 65535; c = Math.floor(v / 65536); t5 = v - c * 65536;\n    v = t6 + c + 65535; c = Math.floor(v / 65536); t6 = v - c * 65536;\n    v = t7 + c + 65535; c = Math.floor(v / 65536); t7 = v - c * 65536;\n    v = t8 + c + 65535; c = Math.floor(v / 65536); t8 = v - c * 65536;\n    v = t9 + c + 65535; c = Math.floor(v / 65536); t9 = v - c * 65536;\n    v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n    v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n    v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n    v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n    v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n    v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n    t0 += c - 1 + 37 * (c - 1);\n\n    o[0] = t0;\n    o[1] = t1;\n    o[2] = t2;\n    o[3] = t3;\n    o[4] = t4;\n    o[5] = t5;\n    o[6] = t6;\n    o[7] = t7;\n    o[8] = t8;\n    o[9] = t9;\n    o[10] = t10;\n    o[11] = t11;\n    o[12] = t12;\n    o[13] = t13;\n    o[14] = t14;\n    o[15] = t15;\n}\n\nfunction square(o: GF, a: GF) {\n    mul(o, a, a);\n}\n\nfunction inv25519(o: GF, inp: GF) {\n    const c = gf();\n    for (let i = 0; i < 16; i++) {\n        c[i] = inp[i];\n    }\n    for (let i = 253; i >= 0; i--) {\n        square(c, c);\n        if (i !== 2 && i !== 4) {\n            mul(c, c, inp);\n        }\n    }\n    for (let i = 0; i < 16; i++) {\n        o[i] = c[i];\n    }\n}\n\nexport function scalarMult(n: Uint8Array, p: Uint8Array): Uint8Array {\n    const z = new Uint8Array(32);\n    const x = new Float64Array(80);\n    const a = gf(), b = gf(), c = gf(),\n        d = gf(), e = gf(), f = gf();\n\n    for (let i = 0; i < 31; i++) {\n        z[i] = n[i];\n    }\n    z[31] = (n[31] & 127) | 64;\n    z[0] &= 248;\n\n    unpack25519(x, p);\n\n    for (let i = 0; i < 16; i++) {\n        b[i] = x[i];\n    }\n\n    a[0] = d[0] = 1;\n\n    for (let i = 254; i >= 0; --i) {\n        const r = (z[i >>> 3] >>> (i & 7)) & 1;\n        sel25519(a, b, r);\n        sel25519(c, d, r);\n        add(e, a, c);\n        sub(a, a, c);\n        add(c, b, d);\n        sub(b, b, d);\n        square(d, e);\n        square(f, a);\n        mul(a, c, a);\n        mul(c, b, e);\n        add(e, a, c);\n        sub(a, a, c);\n        square(b, a);\n        sub(c, d, f);\n        mul(a, c, _121665);\n        add(a, a, d);\n        mul(c, c, a);\n        mul(a, d, f);\n        mul(d, b, x);\n        square(b, e);\n        sel25519(a, b, r);\n        sel25519(c, d, r);\n    }\n    for (let i = 0; i < 16; i++) {\n        x[i + 16] = a[i];\n        x[i + 32] = c[i];\n        x[i + 48] = b[i];\n        x[i + 64] = d[i];\n    }\n    const x32 = x.subarray(32);\n    const x16 = x.subarray(16);\n    inv25519(x32, x32);\n    mul(x16, x16, x32);\n    const q = new Uint8Array(32);\n    pack25519(q, x16);\n    return q;\n}\n\nexport function scalarMultBase(n: Uint8Array): Uint8Array {\n    return scalarMult(n, _9);\n}\n\nexport interface KeyPair {\n    publicKey: Uint8Array;\n    secretKey: Uint8Array;\n}\n\nexport function generateKeyPairFromSeed(seed: Uint8Array): KeyPair {\n    if (seed.length !== SECRET_KEY_LENGTH) {\n        throw new Error(`x25519: seed must be ${SECRET_KEY_LENGTH} bytes`);\n    }\n    const secretKey = new Uint8Array(seed);\n    const publicKey = scalarMultBase(secretKey);\n    return {\n        publicKey,\n        secretKey\n    };\n}\n\nexport function generateKeyPair(prng?: RandomSource): KeyPair {\n    const seed = randomBytes(32, prng);\n    const result = generateKeyPairFromSeed(seed);\n    wipe(seed);\n    return result;\n}\n\n/**\n * Returns a shared key between our secret key and a peer's public key.\n *\n * Throws an error if the given keys are of wrong length.\n *\n * If rejectZero is true throws if the calculated shared key is all-zero.\n * From RFC 7748:\n *\n * > Protocol designers using Diffie-Hellman over the curves defined in\n * > this document must not assume \"contributory behavior\".  Specially,\n * > contributory behavior means that both parties' private keys\n * > contribute to the resulting shared key.  Since curve25519 and\n * > curve448 have cofactors of 8 and 4 (respectively), an input point of\n * > small order will eliminate any contribution from the other party's\n * > private key.  This situation can be detected by checking for the all-\n * > zero output, which implementations MAY do, as specified in Section 6.\n * > However, a large number of existing implementations do not do this.\n *\n * IMPORTANT: the returned key is a raw result of scalar multiplication.\n * To use it as a key material, hash it with a cryptographic hash function.\n */\nexport function sharedKey(mySecretKey: Uint8Array, theirPublicKey: Uint8Array, rejectZero = false): Uint8Array {\n    if (mySecretKey.length !== PUBLIC_KEY_LENGTH) {\n        throw new Error(\"X25519: incorrect secret key length\");\n    }\n    if (theirPublicKey.length !== PUBLIC_KEY_LENGTH) {\n        throw new Error(\"X25519: incorrect public key length\");\n    }\n\n    const result = scalarMult(mySecretKey, theirPublicKey);\n\n    if (rejectZero) {\n        let zeros = 0;\n        for (let i = 0; i < result.length; i++) {\n            zeros |= result[i];\n        }\n        if (zeros === 0) {\n            throw new Error(\"X25519: invalid shared key\");\n        }\n    }\n\n    return result;\n}\n"]},"metadata":{},"sourceType":"script"}